# Maintainer: onefire <onefire.myself@gmail.com>
pkgname=rstudio-desktop-custom
pkgver=0.96.330
pkgrel=1
pkgdesc="An IDE for R"
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.rstudio.org/"
depends=('r>=2.11.1' 'pango>=1.14.0' 'qtwebkit')
conflicts=('rstudio-desktop' 'rstudio-desktop-git')
provides=("rstudio-desktop=${pkgver}")
groups=('custom')

if [ "$CARCH" = "i686" ]; then
	_arch=i386
	sha256sums=('8230e652dd4500f5c8fe4c8764f2dd966637ba82c1ad133e472e464e05059ffa')

elif [ "$CARCH" = "x86_64" ]; then
	_arch=amd64
	sha256sums=('1954b9e06c9e99b01f095acabba6d6922715081b634bfd79a2d9c79478757dc7')
fi

source=("http://download1.rstudio.org/rstudio-${pkgver}-${_arch}.deb")

build() {
  msg "Getting contents of .deb package..."
  cd "$srcdir"
  tar zxpf data.tar.gz -C "$pkgdir"
}

package() {
  install -dm755 "$pkgdir/usr/bin"
  cd "$pkgdir/usr/lib/rstudio/bin"
  cd "$pkgdir/usr/bin"
  ln -s -f ../lib/rstudio/bin/rstudio rstudio-bin
}
