# Maintainer: onefire <onefire.myself@gmail.com>
pkgname=rstudio-desktop-custom
pkgver=0.97.320
pkgrel=1
pkgdesc="An IDE for R"
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.rstudio.org/"
depends=('r>=2.11.1' 'pango>=1.14.0' 'qtwebkit')
conflicts=('rstudio-desktop' 'rstudio-desktop-git')
provides=("rstudio-desktop=${pkgver}")
groups=('custom')

if [ "$CARCH" = "i686" ]; then
	_arch=i386
	sha256sums=('a9b2e4cf9a1cd3881a9d579a491c69c43faffe6c939434d747c0a00f5fe506c0')

elif [ "$CARCH" = "x86_64" ]; then
	_arch=amd64
	sha256sums=('dd77fd60a07a8870b5c857cbfe11b98e5ba30f00c55c44eb091a4cf280f76fa7')
fi

source=("http://download1.rstudio.org/rstudio-${pkgver}-${_arch}.deb")

build() {
  msg "Getting contents of .deb package..."
  cd "$srcdir"
  tar zxpf data.tar.gz -C "$pkgdir"
}

package() {
  install -dm755 "$pkgdir/usr/bin"
  cd "$pkgdir/usr/lib/rstudio/bin"
  cd "$pkgdir/usr/bin"
  ln -s -f ../lib/rstudio/bin/rstudio rstudio-bin
}
