# Maintainer: onefire <onefire.myself@gmail.com>
#Contributor: Ewoud Nuyts <ewoud.nuyts@gmail.com>
#Contributor: Timothy Redaelli <timothy.redaelli@gmail.com>
pkgname=shc
pkgver=3.8.9
pkgrel=2
pkgdesc="Converts shell script to C source code, and then compiles it. Do NOT use this to encrypt your scripts as it is not meant to be used for that."
arch=('any')
url="http://www.datsi.fi.upm.es/~frosal/sources/shc.html"
provides=('shc')
license=('GPL')
source=("http://www.datsi.fi.upm.es/~frosal/sources/${pkgname}-${pkgver}.tgz")
sha256sums=('ef7bbf1252c9c791f711782870d00d6f19c42c08e0ee57e9a04d0e2b3d114d40')

build() {
  cd "${srcdir}"/"${pkgname}"-"${pkgver}"
  #makefile assumes this symbolic link exists in version 3.8.9
  if [ ! -f "${pkgname}".c  ]
  then
  msg "Created symbolic link ${srcdir}/${pkgname}-${pkgver}/${pkgname}.c" 
  ln -s "${pkgname}"-"${pkgver}".c "${pkgname}".c
  fi
  make "${pkgname}"   
}

package() {
  cd "${srcdir}"/"${pkgname}"-"${pkgver}"
  install -D -m 755 "${pkgname}" "${pkgdir}"/usr/bin/shc
  #install the man page
  gzip "${pkgname}".1
  install -D -m 644 "${pkgname}".1.gz "$pkgdir"/usr/share/man/man1/"${pkgname}".1.gz
}


